---
import Icon from "@components/icon.astro";
---

<button
  class="fixed right-6 bottom-10 p-3 bg-primary text-white rounded-full invisible"
  id="scroll-top"
  type="button"
  title="scroll to top"
>
  <Icon name="arrow-up" />
</button>

<script>
  const scrollTopButton = document.getElementById(
    "scroll-top"
  ) as HTMLButtonElement;

  scrollTopButton?.addEventListener("click", () => {
    scrollTo({ top: 0, behavior: "smooth" });
  });

  let previousScrollY = scrollY;

  window.addEventListener("scroll", () => {
    // Get the current scroll position
    const currentScrollY = scrollY;

    if (currentScrollY > previousScrollY || currentScrollY < 100) {
      // Hide button when user is scrolling down or has not scroll more than
      // 100px of the screen
      scrollTopButton.classList.add("animate-zoom-out", "invisible");
      scrollTopButton.classList.remove("animate-zoom-in");
    } else {
      // Show button when user is scrolling up
      scrollTopButton?.classList.remove("invisible", "animate-zoom-out");
      scrollTopButton.classList.add("animate-zoom-in");
    }

    // Update previous scroll position
    previousScrollY = currentScrollY;
  });
</script>
